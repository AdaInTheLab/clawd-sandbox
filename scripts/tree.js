#!/usr/bin/env node\nimport process from 'process';\nimport { parse } from 'https://unpkg.com/acorn@8/dist/acorn.mjs';\nimport { readFileSync } from 'fs';\nimport path from 'path';\nimport { fileURLToPath } from 'url';\n\nconst __dirname = path.dirname(fileURLToPath(import.meta.url));\nconst args = process.argv.slice(2);\nconst filePath = args[0] ? path.resolve(args[0]) : path.join(__dirname, '../skills/code-vision/example.js');\n\nlet code;\ntry {\n  code = readFileSync(filePath, 'utf8');\n} catch (e) {\n  console.error(`Error reading ${filePath}:`, e.message);\n  process.exit(1);\n}\n\nlet ast;\ntry {\n  ast = parse(code, {\n    ecmaVersion: 2022,\n    sourceType: 'module',\n    locations: true,\n    ranges: true\n  });\n} catch (e) {\n  console.error('Parse error:', e.message);\n  process.exit(1);\n}\n\nfunction treefy(node, depth = 0, maxDepth = 5) {\n  if (depth > maxDepth) {\n    return { type: '...' };\n  }\n  const obj = {\n    type: node.type,\n    loc: node.loc,\n    ...(node.id && { name: node.id.name }),\n    ...(node.range && { range: node.range })\n  };\n  obj.children = [];\n\n  const addChildren = (nodes) => {\n    if (Array.isArray(nodes)) {\n      obj.children.push(...nodes.map(child => treefy(child, depth + 1, maxDepth)));\n    } else if (nodes) {\n      obj.children.push(treefy(nodes, depth + 1, maxDepth));\n    }\n  };\n\n  if (node.body) addChildren(node.body);\n  if (node.declarations) addChildren(node.declarations);\n  if (node.elements) addChildren(node.elements);\n  // add more node types as needed\n\n  obj.children = obj.children.filter(c => c && c.type !== '...');\n  return obj;\n}\n\nconsole.log(JSON.stringify(treefy(ast), null, 2));